var DXUtils=Stapes.subclass({constructor:function(n){this.defaultReservedWords={SUMWORD:"|Word_Reserved_Sum_Column|",GROUPWORD:"|Word_Reserved_Group_Column|",HIDEWORD:"|Word_Reserved_Hide_Column|",AVERAGEWORD:"|Word_Reserved_Avg_Column|",CAPTIONWORD:"|Word_Reserved_Format_Caption|",FORMATWORD:"|Word_Reserved_Format_Column|",BOLDWORD:"|Word_Reserved_Bold_Text_Column|",PIVOTROWWORD:"|WORD_RESERVED_PIVOT_ROW|",PIVOTCOLUMNWORD:"|WORD_RESERVED_PIVOT_COLUMN|",PIVOTDATAWORD:"|WORD_RESERVED_PIVOT_DATA|"};this.baseModule=n},getDXDecimals:function(){var t=this,n="",i;if(t.baseModule.configuration.Gen_Decimals!=undefined&&t.baseModule.configuration.Gen_Decimals>0)for(n="0.",i=0;i<t.baseModule.configuration.Gen_Decimals;i++)n=n+"#";return n},getColumnDataType:function(n,t){let i="string",r=function(n){return n&&Object.prototype.toString.call(n)==="[object Date]"&&!isNaN(n)};if(n!=undefined&&n.length>0){let u=n[0][t];r(u)?i="date":typeof u=="number"?i="number":typeof u=="string"?i="string":typeof u=="boolean"&&(i="boolean")}return i},gridControl:function(n,t){var i=this;let u={paging:{pageSize:25},pager:{showPageSizeSelector:!0,allowedPageSizes:[10,25,50,100]},headerFilter:{visible:!0},filterPanel:{visible:!0},searchPanel:{visible:!0},allowColumnReordering:!0,allowColumnResizing:!0,rowAlternationEnabled:!0,filterRow:{visible:!0,applyFilter:"auto"},showRowLines:!1,groupPanel:{emptyPanelText:i18n("gridGroupText"),visible:!0},scrolling:{mode:"standard"},columnResizingMode:"widget",customizeColumns:function(n){n.forEach(function(n){i.formatCurrentColumn(t.dataSource,n)})},onContentReady:function(){$(n).dxDataGrid("columnOption",i.defaultReservedWords.SUMWORD,"visible",!1);$(n).dxDataGrid("columnOption",i.defaultReservedWords.GROUPWORD,"visible",!1);$(n).dxDataGrid("columnOption",i.defaultReservedWords.HIDEWORD,"visible",!1);$(n).dxDataGrid("columnOption",i.defaultReservedWords.CAPTIONWORD,"visible",!1);$(n).dxDataGrid("columnOption",i.defaultReservedWords.AVERAGEWORD,"visible",!1);$(n).dxDataGrid("columnOption",i.defaultReservedWords.FORMATWORD,"visible",!1);$(n).dxDataGrid("columnOption",i.defaultReservedWords.BOLDWORD,"visible",!1);$(n).dxDataGrid("columnOption",i.defaultReservedWords.PIVOTROWWORD,"visible",!1);$(n).dxDataGrid("columnOption",i.defaultReservedWords.PIVOTCOLUMNWORD,"visible",!1);$(n).dxDataGrid("columnOption",i.defaultReservedWords.PIVOTDATAWORD,"visible",!1)},columnAutoWidth:!0,width:"100%"};t||(t={});let r=$.extend({},u,t);return r.isFormatting=!1,r.summary=i.formatGridControlSum(t.dataSource),$(n).dxDataGrid(r).dxDataGrid("instance")},formatGridControlSum:function(n){var t=this;let i=[],r=t.formatGridContainColumn(n,t.defaultReservedWords.SUMWORD);if(r){let u=t.formatGridGetColumnInfo(n,t.defaultReservedWords.SUMWORD),r=u.split(",");for(let n=0;n<r.length;n++){let t={column:r[n],summaryType:"sum",valueFormat:"#,##0.##"};i.push(t)}}let u=t.formatGridContainColumn(n,t.defaultReservedWords.AVERAGEWORD);if(u){let u=t.formatGridGetColumnInfo(n,t.defaultReservedWords.AVERAGEWORD),r=u.split(",");for(let n=0;n<r.length;n++){let t={column:r[n],summaryType:"avg",valueFormat:"#,##0.##"};i.push(t)}}return{totalItems:i,groupItems:i}},formatCurrentColumn:function(n,t){var i=this;i.gridColumnHide(n,t,i);i.gridColumnCaption(n,t,i);i.gridColumnGroup(n,t,i);i.gridColumnBoldText(n,t,i);let r=i.getColumnDataType(n,t.dataField);r=="number"&&(t.format={type:"fixedPoint",precision:2},t.customizeText=function(n){return n.value=="0.00"?"-":n.valueText});i.gridColumnFormat(n,t,i)},gridColumnHide:function(n,t,i){let r=i.formatGridContainColumn(n,i.defaultReservedWords.HIDEWORD);if(r){let u=i.formatGridGetColumnInfo(n,i.defaultReservedWords.HIDEWORD),r=u.split(",");for(let n=0;n<r.length;n++){let i=r[n];if(i==t.dataField){t.visible=!1;break}}}},gridColumnCaption:function(n,t,i){let r=i.formatGridContainColumn(n,i.defaultReservedWords.CAPTIONWORD);if(r){let u=i.formatGridGetColumnInfo(n,i.defaultReservedWords.CAPTIONWORD),r=u.split(",");for(let n=0;n<r.length;n++){let i=r[n].split(":");if(i[0]==t.dataField){t.caption=i[1];break}}}},gridColumnGroup:function(n,t,i){let r=i.formatGridContainColumn(n,i.defaultReservedWords.GROUPWORD);if(r){let u=i.formatGridGetColumnInfo(n,i.defaultReservedWords.GROUPWORD),r=u.split(",");for(let n=0;n<r.length;n++){let i=r[n];if(i==t.dataField){t.groupIndex=0;break}}}},gridColumnFormat:function(n,t,i){let r=i.formatGridContainColumn(n,i.defaultReservedWords.FORMATWORD);if(r){let u=i.formatGridGetColumnInfo(n,i.defaultReservedWords.FORMATWORD),r=u.split(",");for(let n=0;n<r.length;n++){let i=r[n].split(":");if(i[0]==t.dataField){t.dataType=i[1];break}}}},gridColumnBoldText:function(n,t,i){let r=i.formatGridContainColumn(n,i.defaultReservedWords.BOLDWORD);if(r){let u=i.formatGridGetColumnInfo(n,i.defaultReservedWords.BOLDWORD),r=u.split(",");for(let n=0;n<r.length;n++){let i=r[n];if(i==t.dataField){t.cssClass="dx-bold-text";break}}}},formatGridContainColumn:function(n,t){let i=!1;if(n!=undefined&&n.length>0){let r=n[0];r[t]!=undefined&&(i=!0)}return i},formatGridGetColumnInfo:function(n,t){let i="";if(n!=undefined&&n.length>0){let r=n[0];r[t]!=undefined&&(i=r[t])}return i},formatHeaderColumn:function(){},barChart:function(n,t){let i={series:{type:"bar",color:"#ffaa66"},tooltip:{enabled:!0,customizeTooltip:function(n){return{text:"<b>"+n.argumentText+"<\/b><\/br>"+n.percentText+" - "+n.valueText}}}};t||(t={});let r=$.extend({},i,t);return $(n).dxChart(r).dxChart("instance")},pieChart:function(n,t){let i={palette:"bright",series:{},connector:{visible:!0,width:.5},tooltip:{enabled:!0,customizeTooltip:function(n){return{text:"<b>"+n.argument+"<\/b> <br/> "+n.valueText+"%"}}},title:"Grafico"};t||(t={});let r=$.extend({},i,t);return $(n).dxPieChart(r).dxPieChart("instance")},getEncodedImage:function(n){var i=this;let t=n.svg();return window.btoa(t)},pivotGrid:function(n,t){var u=this;let i={dataFieldArea:"column",rowHeaderLayout:"tree",wordWrapEnabled:!1,dataSource:{}};i.dataSource=u.pivotGetDataSource(t.data);t||(t={});let r=$.extend({},i,t);r.onCellClick=function(n){console.info(n)};$(n).dxPivotGrid(r)},pivotGetDataSource:function(n){var t=this;let i=[];if(n!=undefined&&n.length>0){let r=n[0];if(r[t.defaultReservedWords.PIVOTROWWORD]!=undefined){let u=t.formatGridGetColumnInfo(n,t.defaultReservedWords.PIVOTROWWORD),r=u.split(",");for(let n=0;n<r.length;n++){let t=r[n].split(":"),u={caption:t[1]!=undefined?t[1]:t[0],dataField:t[0],expanded:!0,area:"row"};i.push(u)}}if(r[t.defaultReservedWords.PIVOTCOLUMNWORD]!=undefined){let u=t.formatGridGetColumnInfo(n,t.defaultReservedWords.PIVOTCOLUMNWORD),r=u.split(",");for(let n=0;n<r.length;n++){let t=r[n].split(":"),u={caption:t[1]!=undefined?t[1]:t[0],dataField:t[0],expanded:!0,area:"column"};i.push(u)}}if(r[t.defaultReservedWords.PIVOTDATAWORD]!=undefined){let u=t.formatGridGetColumnInfo(n,t.defaultReservedWords.PIVOTDATAWORD),r=u.split(",");for(let n=0;n<r.length;n++){let t=r[n].split(":"),u={caption:t[1]!=undefined?t[1]:t[0],dataField:t[0],summaryType:t[2],area:"data"};i.push(u)}}}return{fields:i,store:n}},box:function(n,t){let i=$.extend({},{direction:"row",width:"100%",height:100},t);return $(n).dxBox(i).dxBox("instance")}});